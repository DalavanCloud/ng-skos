<!DOCTYPE html>
<html lang="en" ng-app="Cocoda">
<head>
    <meta charset="utf-8">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet" />
    <link href="ng-skos.css" rel="stylesheet" />
    <link href="demo.css" rel="stylesheet" />
</head>
<body ng-controller="myController">
    <header>
        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">Cocoda</a>
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                </button>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a data-toggle="dropdown" type="button" class="dropdown-toggle" ng-init="language='en'">
                            Language: {{language}}
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a href="#" ng-click="language='de'">de</a>
                            </li>
                            <li>
                                <a href="#" ng-click="language='en'">en</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a data-toggle="dropdown" type="button" class="dropdown-toggle">
                            Concept Scheme: {{activeView.origin}}
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a href="#" ng-click="setOrigin('GND')">GND</a>
                            </li>
                            <li>
                                <a href="#" ng-click="setOrigin('RVK')">RVK</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <div ng-if="activeView.origin.length" class="col-md-3" style="margin-top:8px;">
                    <input class="form-control"
                        suggest-typeahead="SubjectOriginSuggest(activeView.origin)"
                        typeahead-on-select="selectOriginSubject($item)"
                        ng-model="originSubject"
                        placeholder="Search"
                        typeahead-loading="loadingLocations"
                        typeahead-editable="false"
                    />
                    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                </div>
                <ul ng-if="activeView.origin.length" class="nav navbar-nav">
                    <li class="dropdown">
                        <a data-toggle="dropdown" type="button" class="dropdown-toggle">
                            Target Scheme: {{activeView.target}}
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a href="#" ng-click="setTarget('GND')">GND</a>
                            </li>
                            <li>
                                <a href="#" ng-click="setTarget('RVK')">RVK</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <div ng-if="activeView.target.length" class="col-md-3" style="margin-top:8px;">
                    <input class="form-control"
                        suggest-typeahead="SubjectTargetSuggest(activeView.target)"
                        typeahead-on-select="selectTargetSubject($item)"
                        ng-model="targetSubject"
                        placeholder="Search"
                        typeahead-loading="loadingLocations"
                        typeahead-editable="false"
                    />
                    <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
                </div>
            </div>
        </nav>
    </header>
    <div class="main fixnav">
        <div class="row">
            <div class="col-md-3">
                <div style="margin-left:15px;">
                    <div ng-if="activeView.origin.length && originConcept" style="width:100%;min-width:450px;">
                        <div class="tmpl-border" skos-concept="originConcept" skos-click="clickOriginConcept" language="language"></div>
                        <div style="margin-bottom:5px;">
                            <button ng-click="saveFrom(activeView.origin, originConcept)">Use term</button>
                        </div>
                    </div>
                        <!-- Scheme specific -->
                    <div ng-if="activeView.origin == 'DDC' || activeView.origin == 'RVK'" style="width:100%;min-width:450px;" class="tmpl-border" skos-tree="treeSample"></div>
                </div>
            </div>
            <div class="col-md-6">
                <div ng-if="!activeView.origin.length" style="margin-top:50px;text-align:center;">
                    <em>Please choose a concept scheme for mapping</em>
                </div>
                <div ng-if="activeView.origin.length && !activeView.target.length" style="margin-top:50px;text-align:center;">
                    <em>Please choose a concept scheme to map to</em>
                </div>
                <div ng-if="activeView.origin.length && activeView.target.length && !originConcept && !targetConcept" style="margin-top:50px;text-align:center;">
                    <em>Please search for terms in the current concept schemes</em>
                </div>
                <div ng-if="originConcept && !currentMapping.from.length && !currentMapping.to.length" style="margin-top:50px;text-align:center;">
                    <em>Please choose a term to work on</em>
                </div>
                <div ng-if="currentMapping.from[0].notation.length || currentMapping.targets[0].notation.length" style="width:100%;" class="tmpl-border">
                    <div style="width:95%;margin:0 auto;">
                        <ul style="text-align:center;list-style-type:none;padding-left:0px;">
                            <li>
                                Mapping from <span class="classification">{{activeView.origin}}</span> to <span class="classification">{{activeView.target}}</span>
                            </li>
                        </ul>
                        <div class="mappingResults">
                            <div class="tmpl-border mappingResults-from"  style="float:left;">
                                <ul style="list-style-type:none;padding-left:0px;">
                                    <li ng-if="currentMapping.from[0].notation.length" style="max-width:280px;display:block;overflow:hidden;">
                                        <span class="notation" popover="{{currentMapping.from[0].prefLabel.de}}" popover-trigger="mouseenter">{{currentMapping.from[0].notation[0]}}</span>  <span>{{currentMapping.from[0].prefLabel.de}}</span>
                                        <!-- GND specific! -->
                                        <a href="#" ng-click="selectSampleOriginConcept(currentMapping.from[0].prefLabel.de, 'http://d-nb.info/gnd/' + currentMapping.from[0].notation[0])"><span class="glyphicon glyphicon-search"></span></a>
                                        <a href="#" ng-click="deleteAll()"><span class="glyphicon glyphicon-trash"></span></a>
                                    </li>
                                    <li ng-if="!currentMapping.from.length">
                                        <em>Please select a base mapping term</em>
                                    </li>
                                </ul>
                            </div>

                            <div class="tmpl-border mappingResults-to" style="float:right;">
                                <ul style="list-style-type:none;padding-left:0px;">
                                    <li ng-if="currentMapping.targets[0].notation.length" ng-repeat="t in currentMapping.targets" style="max-width:280px;display:block;overflow:hidden;">
                                        <span class="notation" popover="{{t.prefLabel.de}}" popover-trigger="mouseenter">{{t.notation[0]}}</span>  <span>{{t.prefLabel.de}}</span>
                                        <a href="#" ng-click="selectSampleTargetConcept(currentMapping.to[t].prefLabel.de, 'http://d-nb.info/gnd/' + t.notation[0])"><span class="glyphicon glyphicon-search"></span></a>
                                        <a href="#" ng-click="deleteTarget($index)"><span class="glyphicon glyphicon-trash"></span></a>
                                    </li>
                                    <li ng-if="!currentMapping.targets.length">
                                        <em>Please select a target mapping term</em>
                                    </li>
                                    
                                </ul>
                            </div>
                        </div>
                        <div class="mappingResults-icon">
                            <big><span class="glyphicon glyphicon-arrow-right"></span></big>
                        </div>
                    </div>
                </div>
                <div style="margin-top:40px;">
                    <div style="width:340px;float:left;margin-left:30px;" class="tmpl-border" skos-mapping="mappingSample"></div>
                    <div style="width:340px;float:right;margin-right:30px;" class="tmpl-border" skos-occurrences="occurrencesSample"></div>
                </div>
            </div>
            <div class="col-md-3">
                <div style="margin-left:15px;">
                    <div ng-if="activeView.origin.length && targetConcept" style="width:100%;min-width:450px;">
                        <div class="tmpl-border" skos-concept="targetConcept" skos-click="clickTargetConcept" language="language"></div>
                        <div style="margin-bottom:5px;">
                            <button ng-click="addTo(activeView.target, targetConcept)">Add target term</button>
                            <button ng-click="replaceTo(activeView.target, targetConcept)">Replace current terms</button>
                        </div>
                    </div>
                        <!-- Scheme specific -->
                    <div ng-if="activeView.target == 'DDC' || activeView.target == 'RVK'" style="width:100%;min-width:450px;" class="tmpl-border" skos-tree="treeSample"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="lib/angular.min.js"></script>
    <script src="lib/angular-resource.min.js"></script>
    <script src="lib/angular-sanitize.min.js"></script>
    <script src="demo.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.0/ui-bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.0/ui-bootstrap-tpls.min.js"></script>
</body>
    <script src="../lib/ng-suggest.js"></script>
    <script src="../src/json-text.js"></script>
    <script src="../src/ng-skos.js"></script>
    <script src="../src/services/SkosConceptProvider.js"></script>
    <script src="../src/directives/skosLabel.js"></script>
    <script src="../src/directives/skosConcept.js"></script>
    <script src="../src/directives/skosTree.js"></script>
    <script src="../src/directives/skosSearch.js"></script>
    <script src="../src/directives/skosMapping.js"></script>
    <script src="../src/directives/skosOccurrences.js"></script>
    
    <script src="cocoda.js"></script>
</html>